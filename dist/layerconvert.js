!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.layerconvert=r():e.layerconvert=r()}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r),t.d(r,"rule",(function(){return n})),t.d(r,"down",(function(){return o})),t.d(r,"upstream",(function(){return u}));var n={};t.r(n),t.d(n,"expressRule",(function(){return x})),t.d(n,"isExpression",(function(){return i})),t.d(n,"getParamsArray",(function(){return b}));var o={};t.r(o),t.d(o,"downConvert",(function(){return S})),t.d(o,"downConvertMerge",(function(){return _})),t.d(o,"downConvertBase",(function(){return P}));var u={};t.r(u),t.d(u,"upstreamConvert",(function(){return R})),t.d(u,"upstreamConvertBase",(function(){return k}));const c=/[^a-zA-Z0-9_]/,i=e=>c.test(e),s={return:!0,new:!0,switch:!0,case:!0,const:!0,let:!0,function:!0,var:!0,undefined:!0,null:!0,true:!0,false:!0},f=["[a-zA-Z_$]","(?:_|\\w)*"].join(""),a=[["\\s*(?:(?:var|const|let)\\s+)"].join(""),"((?:\\s*",f,"\\s*,)*","(?:\\s*",f,"))\\s*=?\\s*"].join(""),l=["(",f,")(?!\\s*[\\w\\[\\(]+)","(?:\\.",f,")*"].join(""),d=(e,r,t={},n=1)=>{let o=e.exec(r);if(!o)return[];if(!e.global)return t[o[n]]=!0,[o[n]];const u=[];for(;o;)t[o[n]]=!0,u.push(o[n]),o=e.exec(r);return u},p=new RegExp(";?\\s*\n|{\\s*\n"),y=new RegExp("\".*?\"|'.*?'"),v=new RegExp(a,"g"),m=new RegExp(l,"g"),b=e=>{const r={};return(e=>{if(!e)return[];const r={},t={};return e.split(p).map(e=>e.split(y).map(e=>{d(v,e,r);return d(m,e,t).filter(e=>!s[e])}).reduce((e,r)=>(e.push(...r),e),[])).reduce((e,r)=>(e.push(...r),e),[]).filter(e=>!r[e])})(e).filter(e=>!s[e]).filter(e=>!r[e]&&(r[e]=e))},w={return:!0},j=new WeakMap,x=(e,r)=>{if(r&&r[e])return r[e];if(j[e])return j[e];const t=b(e),n=!!t.filter(e=>w[e])[0],o=t.filter(e=>!s[e]);let u=null;if(n)u=new Function(...o,e);else{const r=e.split(p),t="return "+r.pop(),n=[...r,t].join("");u=new Function(...o,n)}return j[e]=u,r&&(r[e]=u),u},g=Symbol.for("scope"),O=Symbol.for("type"),S=(e={},r={},t={},n=!0)=>n?_(e,r,t):P(e,r,t),_=(e={},r={},t={})=>{switch(r[O]){case"array":return h(e,r,t);default:return M(e,r,t)}},h=(e=[],r={},t=[])=>{const n={...r,[O]:void 0,[g]:void 0};return Array.from(t).concat(e.map(e=>_(e,n,{})))},M=(e={},r={},t={})=>{const n={...t,...e};return Object.keys(r).reduce((n,o)=>{const u=r[o],c=u[g];if(c)return n[o]=_(e[c],u,t[c]||{}),n;if(!i(u))return void 0===e[u]?n[o]=t[u]:n[o]=e[u],n;const s=x(u),f=b(u).map(r=>{const n=e[r],o=t[r];return void 0===n?o:n});return n[o]=s(...f),n},n)},P=(e={},r={},t={})=>{switch(r[O]){case"array":return A(e,r,t);default:return C(e,r,t)}},A=(e=[],r={},t=[])=>{const n={...r,[O]:void 0,[g]:void 0};return Array.from(t).concat(e.map(e=>P(e,n,{})))},C=(e={},r={},t={})=>Object.keys(r).reduce((t,n)=>{const o=r[n];if(o[g])return t[n]=P(e[o[g]]||e,o,t[n]),t;if(!i(o))return t[n]=e[o],t;const u=x(o),c=b(o).map(r=>e[r]);return t[n]=u(...c),t},{...t}),E=Symbol.for("target"),R=(Symbol.for("type"),(e={},r={},t={})=>{const n=r[E],o=r[n];let u=e;switch(n&&(u=e[n]),o){case"object":default:return k(u,r,t)}}),k=(e={},r={},t={})=>Object.keys(r).reduce((t,n)=>{const o=r[n],u=i(n);let c=e[n];if(u){const r=b(n).map(r=>e[r]);c=x(n)(...r)}return o[E]?(t[o[E]]=R(c,{...o,[E]:void 0},{}),t):(t[o]=c,t)},{...t})}])}));