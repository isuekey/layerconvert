!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.layerconvert=r():e.layerconvert=r()}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r),t.d(r,"rule",(function(){return n})),t.d(r,"down",(function(){return o})),t.d(r,"upstream",(function(){return u}));var n={};t.r(n),t.d(n,"expressRule",(function(){return S})),t.d(n,"isExpression",(function(){return c})),t.d(n,"getParamsArray",(function(){return j}));var o={};t.r(o),t.d(o,"downConvert",(function(){return M})),t.d(o,"downConvertMerge",(function(){return _})),t.d(o,"downConvertBase",(function(){return B}));var u={};t.r(u),t.d(u,"upstreamConvert",(function(){return R})),t.d(u,"upstreamConvertBase",(function(){return N}));const i=/[^a-zA-Z0-9_]/,c=e=>i.test(e),s="undefined,null,true,false,eval,NaN,Infinity".split(","),a="break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield".split(","),f="Array,ArrayBuffer,Atomics,BigInt,BigInt64Array,BigUint64Array,Boolean,DataView,Date,Errors,Float32Array,Float64Array,Function,JSON,Math,Map,Number,Object,Promise,Proxy,Set,String,Symbol,WeakMap,WeakSet".split(","),l=s.concat(a,f).reduce((e,r)=>(e[r]=!0,e),{}),d=["[a-zA-Z_$]","(?:_|\\w)*"].join(""),p=[["\\s*(?:(?:var|const|let)\\s+)"].join(""),"((?:\\s*",d,"\\s*,)*","(?:\\s*",d,"))\\s*=?\\s*"].join(""),y=["(",d,")(?!\\s*[\\w\\[\\(]+)","(?:\\.",d,")*"].join(""),m=(e,r,t={},n=1)=>{let o=e.exec(r);if(!o)return[];if(!e.global)return t[o[n]]=!0,[o[n]];const u=[];for(;o;)t[o[n]]=!0,u.push(o[n]),o=e.exec(r);return u},b=new RegExp(";?\\s*\n|{\\s*\n"),v=new RegExp("\".*?\"|'.*?'"),w=new RegExp(p,"g"),g=new RegExp(y,"g"),j=e=>{const r={};return(e=>{if(!e)return[];const r={},t={};return e.split(b).map(e=>e.split(v).map(e=>{m(w,e,r);return m(g,e,t).filter(e=>!l[e])}).reduce((e,r)=>(e.push(...r),e),[])).reduce((e,r)=>(e.push(...r),e),[]).filter(e=>!r[e])})(e).filter(e=>!l[e]).filter(e=>!r[e]&&(r[e]=e))},x={return:!0},h=new WeakMap,S=(e,r)=>{if(r&&r[e])return r[e];if(h[e])return h[e];const t=j(e),n=!!t.filter(e=>x[e])[0],o=t.filter(e=>!l[e]);let u=null;if(n)u=new Function(...o,e);else{const r=e.split(b),t="return "+r.pop(),n=[...r,t].join("");u=new Function(...o,n)}return h[e]=u,r&&(r[e]=u),u},A=Symbol.for("scope"),O=Symbol.for("type"),M=(e={},r={},t={},n=!0)=>n?_(e,r,t):B(e,r,t),_=(e={},r={},t={})=>{switch(r[O]){case"array":return P(e,r,t);default:return k(e,r,t)}},P=(e=[],r={},t=[])=>{const n={...r,[O]:void 0,[A]:void 0};return Array.from(t).concat(e.map(e=>_(e,n,{})))},k=(e={},r={},t={})=>{const n={...t,...e};return Object.keys(r).reduce((n,o)=>{const u=r[o],i=u[A];if(i)return n[o]=_(e[i],u,t[i]||{}),n;if(!c(u))return void 0===e[u]?n[o]=t[u]:n[o]=e[u],n;const s=S(u),a=j(u).map(r=>{const n=e[r],o=t[r];return void 0===n?o:n});return n[o]=s(...a),n},n)},B=(e={},r={},t={})=>{switch(r[O]){case"array":return E(e,r,t);default:return C(e,r,t)}},E=(e=[],r={},t=[])=>{const n={...r,[O]:void 0,[A]:void 0};return Array.from(t).concat(e.map(e=>B(e,n,{})))},C=(e={},r={},t={})=>Object.keys(r).reduce((t,n)=>{const o=r[n];if(o[A])return t[n]=B(e[o[A]]||e,o,t[n]),t;if(!c(o))return t[n]=e[o],t;const u=S(o),i=j(o).map(r=>e[r]);return t[n]=u(...i),t},{...t}),F=Symbol.for("target"),R=(Symbol.for("type"),(e={},r={},t={})=>{const n=r[F],o=r[n];let u=e;switch(n&&(u=e[n]),o){case"object":default:return N(u,r,t)}}),N=(e={},r={},t={})=>Object.keys(r).reduce((t,n)=>{const o=r[n],u=c(n);let i=e[n];if(u){const r=j(n).map(r=>e[r]);i=S(n)(...r)}return o[F]?(t[o[F]]=R(i,{...o,[F]:void 0},{}),t):(t[o]=i,t)},{...t})}])}));